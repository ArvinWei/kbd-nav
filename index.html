<!DOCTYPE html>
<html lang="zh-Hans">
<head>
	<meta charset="utf-8">
	<title>我的导航</title>
	<link rel="stylesheet" href="./style.css">
	<link rel="shortcut icon" type="image/x-icon" href="tabs.png">
</head>
<body>
	<header></header>
	<main>
		<div class="wrapper" id="mian"></div>
		
	</main>
	<footer></footer>
	<script>
		//1、初始化数据
		var keys = {
			0:['q','w','e','r','t','y','u','i','o','p'],
			1:['a','s','d','f','g','h','j','k','l'],
			2:['z','x','c','v','b','n','m'],
			length: 3
		}
		var hash = {
			'q': 'qq.com',
			'w': 'weibo.com',
			'e': 'ebay.com',
			'r': 'rolex.com',
			't': 'taobao.com',
			'y': 'yy.com',
			'u': 'uc.cn',
			'i': 'iqiyi.com',
			'o': 'opera.com',
			'p': 'pro.25pp.com',
			'a': 'acfun.cn',
			's': 'sougou.com',
			'd': 'douyu.com',
			'f': 'facebook.com',
			'g': 'google.com',
			'h': 'huya.com',
			'j': 'jianshu.com',
			'k': 'kanzhun.com',
			'l': 'lagou.com',
			'z': 'zhihu.com',
			'x': 'xx.com',
			'c': 'c.163.com',
			'v': 'v.qq.com',
			'b': 'blued.cn',
			'n': 'nnn.com',
			'm': 'mcdonalds.com',
		}
		var hashInLocalStorage = getItemlocalStorage('zzz')
		if(hashInLocalStorage){
			hash = hashInLocalStorage
		}
		function getItemlocalStorage(name){
			return JSON.parse(localStorage.getItem(name) || 'null')
		}
		function tag(tagName){
			return document.createElement(tagName)
			
		}
        //2、生成键盘
        //遍历keys，生成kbd标签
		var index = 0
		while(index < keys['length']){//0，1，2，
			var div = tag('div')
			div.className = 'row'
		    mian.appendChild(div)
		    var row = keys[index]//第一个数组，第二个数组，第三个数组
		    var index2=0
		    while(index2 < row['length']){
		    	var kbd = tag('kbd')
				var span = tag('span')
		    	span.textContent = row[index2]
				span.className = "text"
				kbd.appendChild(span)
		    	kbd.className = 'key'
		    	var button = tag('button')
		    	button.textContent = '编辑'
		    	button.id = row[index2]
				var img = tag('img')
				if(hash[row[index2]]){
					img.src = 'http://'+hash[row[index2]]+'/favicon.ico'
				}else{
					img.src = '//img.zcool.cn/community/01616e59633508a8012193a36f2b8b.jpg@2o.jpg'
				}
				img.onerror = function(xxx){
					xxx.target.src = '//img.zcool.cn/community/01616e59633508a8012193a36f2b8b.jpg@2o.jpg'
				}
				
		    	button.onclick = function(xzkjcnxlkcjlk){
		    		var button2 = xzkjcnxlkcjlk['target']
		    		var img2 = button2.previousSibling
		    		var key = button['id']
		    		var x = prompt('请输入一个网址')
		    		hash[key] = x
		    		img2.src = 'http://'+ x + '/favicon.ico'
		    		img2.onerror = function(xxx){
		    			xxx.target.src = '//img.zcool.cn/community/01616e59633508a8012193a36f2b8b.jpg@2o.jpg'
		    		}
		    		localStorage.setItem('zzz',JSON.stringify(hash))
		    		

		    	}
		    	kbd.appendChild(img)
		    	kbd.appendChild(button)
		    	div.appendChild(kbd)
		    	index2 = index2 + 1
		    }
            index = index + 1
		}
		//3、监听键盘
		document.onkeypress = function(xzkjcnxlkcjlk){
			var key = xzkjcnxlkcjlk['key']
			var website = hash[key]
			window.open('http://'+website,'_blank')
		}
	</script>
</body>
</html>